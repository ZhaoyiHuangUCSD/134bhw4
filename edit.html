<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" media="only screen and (max-width: 800px)" href="./src/mobile.css" type="text/css" />
    <meta charset="utf-8">
    <meta name="viewport" content="width-device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=PT+Serif" rel="stylesheet" type="text/css">
<title>Editing Page </title>
    <style>
        input[type="text"]{
            border:1px solid grey;
            width:200px;
            height:100px;
        }
        body{
            font-family: 'PT Serif', serif;
        }
        
    </style>
    
  <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDylU22y4KBSC7NtdPcurxMu-1uJid67i0",
    authDomain: "bhw4-af7bc.firebaseapp.com",
    databaseURL: "https://bhw4-af7bc.firebaseio.com",
    projectId: "bhw4-af7bc",
    storageBucket: "bhw4-af7bc.appspot.com",
    messagingSenderId: "435052500774"
  };
  firebase.initializeApp(config);
</script>
    
    
    <script>
        
  function writeUserData(issuename, issuedescriptions,issuepriority,issuestatus) {
   
      if(issuedescriptions!=""){
        window.alert("bb");
         firebase.database().ref("issues/"+issuename).set({
           issuedescriptions:issuedescriptions
         });
      }
      if(issuepriority!=0){
        window.alert("bb");
         firebase.database().ref("issues/"+issuename).set({
           issuepriority:issuepriority
         });
      }
  firebase.database().ref("issues/"+issuename).set({
    //issuename:issuename,
    issuedescriptions:issuedescriptions,
    issuestatus:issuestatus
    //issuefile:fileurl
  });
} 

//var fileurl="";        
function previewFile(){
  var storage = firebase.storage();

  var file = document.getElementById("files").files[0];
  
  var storageRef = firebase.storage().ref();
  
  //dynamically set reference to the file name
  var thisRef = storageRef.child(file.name);

  thisRef.put(file).then(function(snapshot) {
   console.log('Uploaded a blob or file!');
});

  }        
        
     

        
function inputThings1(){
    
    if(document.getElementById("issuedescription")!=null){
    
    firebase.database().ref("issues/"+document.getElementById("issuename").value).update({
           issuedescriptions:document.getElementById("issuedescription").value
         });
    }
     if(document.getElementById("issuepriority")!=null){
    
    firebase.database().ref("issues/"+document.getElementById("issuename").value).update({
           issuepriority:document.getElementById("issuepriority").value
         });
    }
    
    firebase.database().ref("issues/"+document.getElementById("issuename").value).update({
           issuestatus:document.getElementById("issuestatus").value
         });
    
    //var issuetype=document.getElementById("issuetype").value;
    //var issuedescriptions=document.getElementById("issuedescription").value;
    //var issuepriority=document.getElementById("issuepriority").value;
    //var issuestatus=document.getElementById("issuestatus").value;
    
    
}
        

    </script>  
    
    
    
    
    
    
    
    
    </head>
<body>

<h1>Edit Issue</h1>
    <form action="./table-after-flip.html" method="get">
        <b>Issue Title</b><br>
         <textarea id="issuename" rows="10" cols="30"></textarea><br>
        <b>Change issue status</b><br>
        <select id="issuestatus">
            <option value="open">re-open</option>
            <option value="close">close</option>
            
        </select><br>
        <br>
        <b>change for issue description</b><br>
        <textarea id="issuedescription" rows="10" cols="30" placeholder="please provide alternative description"></textarea><br>
        <b>Change issue priority</b><br>
        <div class="slidecontainer"><input type="range" min="1" max="3" value="0" class="slider" id="issuepriority"></div><br>
            <b>Update Issue Attachment</b><br>
            <input type="file" id="files" onchange="previewFile()" id="files" name="files[]" multiple /><br>
            <p>&nbsp;</p>
            <button type="button" onclick="inputThings1()" >Submit</button>
            <button type="reset">Reset</button>
    </form>
</body>
</html>
